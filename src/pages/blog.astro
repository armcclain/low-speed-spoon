---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import Layout from '../../layouts/BaseLayout.astro';
import ProjectCard from '../../components/ProjectCard.astro';
import NewsletterForm from '../components/NewsletterForm.astro';

const posts = await getCollection("blog");
const sortedPosts = posts.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<BaseLayout title="newsletter">
  <section class="mx-auto max-w-3xl px-4 py-16 prose">
      <h1 class="text-xl font-medium mb-6">newsletter</h1>
    <br>

    {sortedPosts.length === 0 ? (
      <p class="text-gray-600">No posts yet â€” check back soon!</p>
    ) : (
      <ul class="space-y-8">
        {sortedPosts.map((post) => (
          <li>
            <a href={`${import.meta.env.BASE_URL}blog/${post.slug}/`} class="block hover:underline text-xl font-semibold">

            <p class="text-gray-500 text-sm">
              {post.data.date.toLocaleDateString()}
            </p>
            {post.data.description && (
              <p class="mt-2 text-gray-700">{post.data.description}</p>
            )}
          </li>
        ))}
      </ul>
    )}
  </section>
  <Fragment slot="newsletter">
  <div class="not-prose my-0">
      <img
        src={`${import.meta.env.BASE_URL}assets/separators/spoon.png`}
        alt=""
        role="presentation"
        class="mx-auto block opacity-90"
        style="width:200px;max-width:none;"
      />
    </div>
    <NewsletterForm />   
  </Fragment>
</Layout>


